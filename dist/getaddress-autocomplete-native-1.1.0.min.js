!function(){"use strict";!function(t){class e{static dispatch(t,e,s){const i=new Event("getaddress-autocomplete-address-selected",{bubbles:!0});i.address=s,i.id=e,t.dispatchEvent(i)}}class s{static dispatch(t,e,s,i){const o=new Event("getaddress-autocomplete-address-selected-failed",{bubbles:!0});o.status=s,o.message=i,o.id=e,t.dispatchEvent(o)}}class i{static dispatch(t,e,s){const i=new Event("getaddress-autocomplete-suggestions",{bubbles:!0});i.suggestions=s,i.query=e,t.dispatchEvent(i)}}class o{static dispatch(t,e,s,i){const o=new Event("getaddress-autocomplete-suggestions-failed",{bubbles:!0});o.status=s,o.message=i,o.query=e,t.dispatchEvent(o)}}var n=function(t,e,s,i){return new(s||(s=Promise))((function(o,n){function r(t){try{u(i.next(t))}catch(t){n(t)}}function a(t){try{u(i.throw(t))}catch(t){n(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,a)}u((i=i.apply(t,e||[])).next())}))};class r{constructor(t,r,a,u){this.input=t,this.client=r,this.output_fields=a,this.attributeValues=u,this.onInputFocus=()=>{this.attributeValues.options.select_on_focus&&this.input.select()},this.onInputPaste=()=>{setTimeout((()=>{this.populateList()}),100)},this.onInput=t=>{if(this.list&&t instanceof InputEvent==0&&t.target instanceof HTMLInputElement){const e=t.target;Array.from(this.list.querySelectorAll("option")).every((t=>t.innerText!==e.value||(this.handleSuggestionSelected(t),!1)))}},this.onKeyUp=t=>{this.debug(t),this.handleKeyUp(t)},this.onKeyDown=t=>{this.debug(t),this.handleKeyDownDefault(t)},this.debug=t=>{this.attributeValues.options.debug&&console.log(t)},this.handleComponentBlur=(t=!1)=>{clearTimeout(this.blurTimer);const e=t?0:100;this.blurTimer=setTimeout((()=>{this.clearList()}),e)},this.handleSuggestionSelected=t=>n(this,void 0,void 0,(function*(){if(this.attributeValues.options.enable_get){this.input.value="",this.attributeValues.options.clear_list_on_select&&this.clearList();const i=t.dataset.id;if(i){const t=yield this.client.get(i);if(t.isSuccess){let s=t.toSuccess();this.bind(s.address),e.dispatch(this.input,i,s.address),this.attributeValues.options.input_focus_on_select&&(this.input.focus(),this.input.setSelectionRange(this.input.value.length,this.input.value.length+1))}else{const e=t.toFailed();s.dispatch(this.input,i,e.status,e.message)}}}else this.clearList()})),this.bind=t=>{t&&this.attributeValues.options.bind_output_fields&&(this.setOutputfield(this.output_fields.building_name,t.building_name),this.setOutputfield(this.output_fields.building_number,t.building_number),this.setOutputfield(this.output_fields.latitude,t.latitude.toString()),this.setOutputfield(this.output_fields.longitude,t.longitude.toString()),this.setOutputfield(this.output_fields.line_1,t.line_1),this.setOutputfield(this.output_fields.line_2,t.line_2),this.setOutputfield(this.output_fields.line_3,t.line_3),this.setOutputfield(this.output_fields.line_4,t.line_4),this.setOutputfield(this.output_fields.country,t.country),this.setOutputfield(this.output_fields.county,t.county),this.setOutputfield(this.output_fields.formatted_address_0,t.formatted_address[0]),this.setOutputfield(this.output_fields.formatted_address_1,t.formatted_address[1]),this.setOutputfield(this.output_fields.formatted_address_2,t.formatted_address[2]),this.setOutputfield(this.output_fields.formatted_address_3,t.formatted_address[3]),this.setOutputfield(this.output_fields.formatted_address_4,t.formatted_address[4]),this.setOutputfield(this.output_fields.town_or_city,t.town_or_city),this.setOutputfield(this.output_fields.locality,t.locality),this.setOutputfield(this.output_fields.district,t.district),this.setOutputfield(this.output_fields.residential,t.residential.toString()),this.setOutputfield(this.output_fields.sub_building_name,t.sub_building_name),this.setOutputfield(this.output_fields.sub_building_number,t.sub_building_number),this.setOutputfield(this.output_fields.thoroughfare,t.thoroughfare),this.setOutputfield(this.output_fields.postcode,t.postcode))},this.setOutputfield=(t,e)=>{if(!t)return;let s=document.getElementById(t);return s||(s=document.querySelector(t)),s&&(s instanceof HTMLInputElement?s.value=e:s.innerText=e),s},this.handleKeyDownDefault=t=>{t.key&&(1===t.key.length||"Unidentified"===t.key)&&(clearTimeout(this.filterTimer),this.filterTimer=setTimeout((()=>{this.input.value.length>=this.attributeValues.options.minimum_characters?this.populateList():this.clearList()}),this.attributeValues.options.delay))},this.handleKeyUp=t=>{if(("Backspace"===t.code||"Delete"===t.code)&&t){t.target==this.input&&(this.input.value.length<this.attributeValues.options.minimum_characters?this.clearList():this.populateList())}},this.populateList=()=>n(this,void 0,void 0,(function*(){var t;const e={all:!0,top:this.attributeValues.options.suggestion_count,template:"{formatted_address}{postcode,, }{postcode}"};this.attributeValues.options.filter&&(e.filter=this.attributeValues.options.filter);const s=null===(t=this.input.value)||void 0===t?void 0:t.trim(),n=yield this.client.autocomplete(s,e);if(n.isSuccess){const t=n.toSuccess(),e=[];if(this.list&&t.suggestions.length){for(let s=0;s<t.suggestions.length;s++){const i=this.getListItem(t.suggestions[s]);e.push(i)}this.list.replaceChildren(...e)}else this.clearList();i.dispatch(this.input,s,t.suggestions)}else{const t=n.toFailed();o.dispatch(this.input,s,t.status,t.message)}})),this.clearList=()=>{this.list&&this.list.replaceChildren()},this.getListItem=t=>{const e=document.createElement("OPTION");let s=t.address;return e.innerText=s,e.dataset.id=t.id,e}}destroy(){this.destroyInput(),this.destroyList()}destroyList(){this.list&&this.list.remove()}destroyInput(){this.input.removeAttribute("list"),this.input.removeEventListener("focus",this.onInputFocus),this.input.removeEventListener("paste",this.onInputPaste),this.input.removeEventListener("keydown",this.onKeyDown),this.input.removeEventListener("keyup",this.onKeyUp),this.input.removeEventListener("input",this.onInput)}build(){this.input.setAttribute("list",`${this.attributeValues.listId}`),this.input.addEventListener("focus",this.onInputFocus),this.input.addEventListener("paste",this.onInputPaste),this.input.addEventListener("keydown",this.onKeyDown),this.input.addEventListener("keyup",this.onKeyUp),this.input.addEventListener("input",this.onInput),this.list=document.createElement("DATALIST"),this.list.id=this.attributeValues.listId,this.input.insertAdjacentElement("afterend",this.list)}}class a{constructor(t={}){this.id_prefix="getAddress-autocomplete-native",this.output_fields=void 0,this.delay=200,this.minimum_characters=2,this.clear_list_on_select=!0,this.select_on_focus=!0,this.alt_autocomplete_url=void 0,this.alt_get_url=void 0,this.suggestion_count=6,this.filter=void 0,this.bind_output_fields=!0,this.input_focus_on_select=!0,this.debug=!1,this.enable_get=!0,this.set_default_output_field_names=!0,Object.assign(this,t)}}class u{constructor(t){this.isSuccess=t}}class l extends u{constructor(){super(!0)}}class d extends l{constructor(t){super(),this.suggestions=t}toSuccess(){return this}toFailed(){throw new Error("Did not fail")}}class h extends l{constructor(t){super(),this.suggestions=t}toSuccess(){return this}toFailed(){throw new Error("Did not fail")}}class c extends l{constructor(t){super(),this.address=t}toSuccess(){return this}toFailed(){throw new Error("Did not fail")}}class p extends l{constructor(t){super(),this.location=t}toSuccess(){return this}toFailed(){throw new Error("Did not fail")}}class _ extends u{constructor(t,e){super(!1),this.status=t,this.message=e}toSuccess(){throw new Error("Not a success")}toFailed(){return this}}class f extends u{constructor(t,e){super(!1),this.status=t,this.message=e}toSuccess(){throw new Error("Not a success")}toFailed(){return this}}class g extends u{constructor(t,e){super(!1),this.status=t,this.message=e}toSuccess(){throw new Error("Not a success")}toFailed(){return this}}class y extends u{constructor(t,e){super(!1),this.status=t,this.message=e}toSuccess(){throw new Error("Not a success")}toFailed(){return this}}class m extends l{constructor(t){super(),this.addresses=t}toSuccess(){return this}toFailed(){throw new Error("failed")}}class b extends u{constructor(t,e){super(!1),this.status=t,this.message=e}toSuccess(){throw new Error("failed")}toFailed(){return this}}class w extends l{constructor(t){super(),this.results=t}toSuccess(){return this}toFailed(){throw new Error("failed")}}class v extends u{constructor(t,e){super(!1),this.status=t,this.message=e}toSuccess(){throw new Error("failed")}toFailed(){return this}}var E=function(t,e,s,i){return new(s||(s=Promise))((function(o,n){function r(t){try{u(i.next(t))}catch(t){n(t)}}function a(t){try{u(i.throw(t))}catch(t){n(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,a)}u((i=i.apply(t,e||[])).next())}))};class R{constructor(t,e="https://api.getaddress.io/autocomplete/{query}",s="https://api.getaddress.io/get/{id}",i="https://api.getaddress.io/location/{query}",o="https://api.getaddress.io/get-location/{id}",n="https://api.getaddress.io/typeahead/{term}"){this.api_key=t,this.autocomplete_url=e,this.get_url=s,this.location_url=i,this.get_location_url=o,this.typeahead_url=n,this.autocompleteResponse=void 0,this.getResponse=void 0,this.locationResponse=void 0,this.getLocationResponse=void 0,this.typeaheadResponse=void 0,this.autocompleteAbortController=new AbortController,this.getAbortController=new AbortController,this.typeaheadAbortController=new AbortController,this.locationAbortController=new AbortController,this.getLocationAbortController=new AbortController}location(t){return E(this,arguments,void 0,(function*(t,e={}){try{const s=Object.assign({all:!0},e);let i=this.location_url.replace(/{query}/i,t);if(this.api_key&&(i=i.includes("?")?`${i}&api-key=${this.api_key}`:`${i}?api-key=${this.api_key}`),void 0!==this.locationResponse&&(this.locationResponse=void 0,this.locationAbortController.abort(),this.locationAbortController=new AbortController),this.locationResponse=yield fetch(i,{method:"post",signal:this.locationAbortController.signal,headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),200===this.locationResponse.status){const t=(yield this.locationResponse.json()).suggestions;return new h(t)}const o=yield this.locationResponse.json();return new g(this.locationResponse.status,o.Message)}catch(t){return t instanceof Error?"AbortError"===t.name?new h([]):new g(401,t.message):new g(401,"Unauthorised")}finally{this.locationResponse=void 0}}))}getLocation(t){return E(this,void 0,void 0,(function*(){try{let e=this.get_location_url.replace(/{id}/i,t);if(this.api_key&&(e=e.includes("?")?`${e}&api-key=${this.api_key}`:`${e}?api-key=${this.api_key}`),void 0!==this.getLocationResponse&&(this.getResponse=void 0,this.getLocationAbortController.abort(),this.getLocationAbortController=new AbortController),this.getResponse=yield fetch(e,{method:"get",signal:this.getLocationAbortController.signal,headers:{"Content-Type":"application/json"}}),200===this.getResponse.status){const t=yield this.getResponse.json();return new p(t)}const s=yield this.getResponse.json();return new _(this.getResponse.status,s.Message)}catch(t){return t instanceof Error?new _(401,t.message):new _(401,"Unauthorised")}finally{this.getResponse=void 0}}))}autocomplete(t){return E(this,arguments,void 0,(function*(t,e={}){try{const s=Object.assign({all:!0},e);let i=this.autocomplete_url.replace(/{query}/i,t);if(this.api_key&&(i=i.includes("?")?`${i}&api-key=${this.api_key}`:`${i}?api-key=${this.api_key}`),void 0!==this.autocompleteResponse&&(this.autocompleteResponse=void 0,this.autocompleteAbortController.abort(),this.autocompleteAbortController=new AbortController),this.autocompleteResponse=yield fetch(i,{method:"post",signal:this.autocompleteAbortController.signal,headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),200===this.autocompleteResponse.status){const t=(yield this.autocompleteResponse.json()).suggestions;return new d(t)}const o=yield this.autocompleteResponse.json();return new f(this.autocompleteResponse.status,o.Message)}catch(t){return t instanceof Error?"AbortError"===t.name?new d([]):new f(401,t.message):new f(401,"Unauthorised")}finally{this.autocompleteResponse=void 0}}))}get(t){return E(this,void 0,void 0,(function*(){try{let e=this.get_url.replace(/{id}/i,t);if(this.api_key&&(e=e.includes("?")?`${e}&api-key=${this.api_key}`:`${e}?api-key=${this.api_key}`),void 0!==this.getResponse&&(this.getResponse=void 0,this.getAbortController.abort(),this.getAbortController=new AbortController),this.getResponse=yield fetch(e,{method:"get",signal:this.getAbortController.signal,headers:{"Content-Type":"application/json"}}),200===this.getResponse.status){const t=yield this.getResponse.json();return new c(t)}const s=yield this.getResponse.json();return new y(this.getResponse.status,s.Message)}catch(t){return t instanceof Error?new y(401,t.message):new y(401,"Unauthorised")}finally{this.getResponse=void 0}}))}find(t){return E(this,void 0,void 0,(function*(){try{const e=yield fetch(`https://api.getaddress.io/find/${t}?api-key=${this.api_key}&expand=true`);if(200===e.status){const t=yield e.json();return new m(t)}const s=yield e.json();return new b(e.status,s.Message)}catch(t){return t instanceof Error?new b(401,t.message):new b(401,"Unauthorised")}}))}typeahead(t){return E(this,arguments,void 0,(function*(t,e={}){try{let s=this.typeahead_url.replace(/{term}/i,t);if(this.api_key&&(s=s.includes("?")?`${s}&api-key=${this.api_key}`:`${s}?api-key=${this.api_key}`),void 0!==this.typeaheadResponse&&(this.typeaheadResponse=void 0,this.typeaheadAbortController.abort(),this.typeaheadAbortController=new AbortController),this.typeaheadResponse=yield fetch(s,{method:"post",signal:this.autocompleteAbortController.signal,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),200===this.typeaheadResponse.status){const t=yield this.typeaheadResponse.json();return new w(t)}const i=yield this.typeaheadResponse.json();return new v(this.typeaheadResponse.status,i.Message)}catch(t){return t instanceof Error?"AbortError"===t.name?new w([]):new v(401,t.message):new v(401,"Unauthorised")}finally{this.typeaheadResponse=void 0}}))}}class A{constructor(t={}){Object.assign(this,t)}}class C{constructor(t,e){this.options=t;let s="";e>0&&(s=`-${e}`),this.id_prefix=t.id_prefix,this.listId=`${this.id_prefix}-list${s}`}}class k{static add(t){this.instances.push(t)}}k.instances=[],t.autocomplete=function(t,e,s){if(!t)return;const i=new a(s);let o=document.getElementById(t);if(o||(o=document.querySelector(t)),!o)return;const n=new R(e,i.alt_autocomplete_url,i.alt_get_url),u=new A(i.output_fields);i.set_default_output_field_names&&(u.formatted_address_0="",u.formatted_address_1="formatted_address_1",u.formatted_address_2="formatted_address_2",u.formatted_address_3="formatted_address_3",u.formatted_address_4="formatted_address_4",u.line_1="line_1",u.line_2="line_2",u.line_3="line_3",u.line_4="line_4",u.town_or_city="town_or_city",u.county="county",u.country="country",u.postcode="postcode",u.latitude="latitude",u.longitude="longitude",u.building_number="building_number",u.building_name="building_name",u.sub_building_number="sub_building_number",u.sub_building_name="sub_building_name",u.thoroughfare="thoroughfare",u.locality="locality",u.district="district",u.residential="residential"),u.formatted_address_0||(u.formatted_address_0=t);const l=k.instances.length,d=new C(i,l),h=new r(o,n,u,d);h.build(),k.add(h)},t.destroy=function(){for(const t of k.instances)t.destroy();k.instances=[]}}({})}();
